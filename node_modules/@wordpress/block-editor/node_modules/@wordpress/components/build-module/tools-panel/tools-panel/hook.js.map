{"version":3,"sources":["@wordpress/components/src/tools-panel/tools-panel/hook.js"],"names":["useEffect","useMemo","useState","styles","useContextSystem","useCx","useToolsPanel","props","className","resetAll","otherProps","cx","classes","ToolsPanel","panelItems","setPanelItems","registerPanelItem","item","items","menuItems","setMenuItems","forEach","hasValue","isShownByDefault","label","toggleItem","resetAllItems","resetMenuItems","panelContext"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAT,EAAoBC,OAApB,EAA6BC,QAA7B,QAA6C,oBAA7C;AAEA;AACA;AACA;;AACA,OAAO,KAAKC,MAAZ,MAAwB,WAAxB;AACA,SAASC,gBAAT,QAAiC,kBAAjC;AACA,SAASC,KAAT,QAAsB,0BAAtB;AAEA,OAAO,SAASC,aAAT,CAAwBC,KAAxB,EAAgC;AACtC,QAAM;AAAEC,IAAAA,SAAF;AAAaC,IAAAA,QAAb;AAAuB,OAAGC;AAA1B,MAAyCN,gBAAgB,CAC9DG,KAD8D,EAE9D,YAF8D,CAA/D;AAKA,QAAMI,EAAE,GAAGN,KAAK,EAAhB;AACA,QAAMO,OAAO,GAAGX,OAAO,CAAE,MAAM;AAC9B,WAAOU,EAAE,CAAER,MAAM,CAACU,UAAT,EAAqBL,SAArB,CAAT;AACA,GAFsB,EAEpB,CAAEA,SAAF,CAFoB,CAAvB,CAPsC,CAWtC;;AACA,QAAM,CAAEM,UAAF,EAAcC,aAAd,IAAgCb,QAAQ,CAAE,EAAF,CAA9C;;AAEA,QAAMc,iBAAiB,GAAKC,IAAF,IAAY;AACrCF,IAAAA,aAAa,CAAIG,KAAF,IAAa,CAAE,GAAGA,KAAL,EAAYD,IAAZ,CAAf,CAAb;AACA,GAFD,CAdsC,CAkBtC;;;AACA,QAAM,CAAEE,SAAF,EAAaC,YAAb,IAA8BlB,QAAQ,CAAE,EAAF,CAA5C,CAnBsC,CAqBtC;;AACAF,EAAAA,SAAS,CAAE,MAAM;AAChB,UAAMkB,KAAK,GAAG,EAAd;AAEAJ,IAAAA,UAAU,CAACO,OAAX,CAAoB,CAAE;AAAEC,MAAAA,QAAF;AAAYC,MAAAA,gBAAZ;AAA8BC,MAAAA;AAA9B,KAAF,KAA6C;AAChEN,MAAAA,KAAK,CAAEM,KAAF,CAAL,GAAiBD,gBAAgB,IAAID,QAAQ,EAA7C;AACA,KAFD;AAIAF,IAAAA,YAAY,CAAEF,KAAF,CAAZ;AACA,GARQ,EAQN,CAAEJ,UAAF,CARM,CAAT,CAtBsC,CAgCtC;AACA;;AACA,QAAMW,UAAU,GAAKD,KAAF,IAAa;AAC/BJ,IAAAA,YAAY,CAAE,EACb,GAAGD,SADU;AAEb,OAAEK,KAAF,GAAW,CAAEL,SAAS,CAAEK,KAAF;AAFT,KAAF,CAAZ;AAIA,GALD,CAlCsC,CAyCtC;;;AACA,QAAME,aAAa,GAAG,MAAM;AAC3B,QAAK,OAAOjB,QAAP,KAAoB,UAAzB,EAAsC;AACrCA,MAAAA,QAAQ;AACR,KAH0B,CAK3B;;;AACA,UAAMkB,cAAc,GAAG,EAAvB;AAEAb,IAAAA,UAAU,CAACO,OAAX,CAAoB,CAAE;AAAEG,MAAAA,KAAF;AAASD,MAAAA;AAAT,KAAF,KAAmC;AACtDI,MAAAA,cAAc,CAAEH,KAAF,CAAd,GAA0B,CAAC,CAAED,gBAA7B;AACA,KAFD;AAIAH,IAAAA,YAAY,CAAEO,cAAF,CAAZ;AACA,GAbD;;AAeA,QAAMC,YAAY,GAAG;AAAET,IAAAA,SAAF;AAAaH,IAAAA;AAAb,GAArB;AAEA,SAAO,EACN,GAAGN,UADG;AAENkB,IAAAA,YAFM;AAGNF,IAAAA,aAHM;AAIND,IAAAA,UAJM;AAKNjB,IAAAA,SAAS,EAAEI;AALL,GAAP;AAOA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useEffect, useMemo, useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport * as styles from '../styles';\nimport { useContextSystem } from '../../ui/context';\nimport { useCx } from '../../utils/hooks/use-cx';\n\nexport function useToolsPanel( props ) {\n\tconst { className, resetAll, ...otherProps } = useContextSystem(\n\t\tprops,\n\t\t'ToolsPanel'\n\t);\n\n\tconst cx = useCx();\n\tconst classes = useMemo( () => {\n\t\treturn cx( styles.ToolsPanel, className );\n\t}, [ className ] );\n\n\t// Allow panel items to register themselves.\n\tconst [ panelItems, setPanelItems ] = useState( [] );\n\n\tconst registerPanelItem = ( item ) => {\n\t\tsetPanelItems( ( items ) => [ ...items, item ] );\n\t};\n\n\t// Manage and share display state of menu items representing child controls.\n\tconst [ menuItems, setMenuItems ] = useState( {} );\n\n\t// Setup menuItems state as panel items register themselves.\n\tuseEffect( () => {\n\t\tconst items = {};\n\n\t\tpanelItems.forEach( ( { hasValue, isShownByDefault, label } ) => {\n\t\t\titems[ label ] = isShownByDefault || hasValue();\n\t\t} );\n\n\t\tsetMenuItems( items );\n\t}, [ panelItems ] );\n\n\t// Toggle the checked state of a menu item which is then used to determine\n\t// display of the item within the panel.\n\tconst toggleItem = ( label ) => {\n\t\tsetMenuItems( {\n\t\t\t...menuItems,\n\t\t\t[ label ]: ! menuItems[ label ],\n\t\t} );\n\t};\n\n\t// Resets display of children and executes resetAll callback if available.\n\tconst resetAllItems = () => {\n\t\tif ( typeof resetAll === 'function' ) {\n\t\t\tresetAll();\n\t\t}\n\n\t\t// Turn off display of all non-default items.\n\t\tconst resetMenuItems = {};\n\n\t\tpanelItems.forEach( ( { label, isShownByDefault } ) => {\n\t\t\tresetMenuItems[ label ] = !! isShownByDefault;\n\t\t} );\n\n\t\tsetMenuItems( resetMenuItems );\n\t};\n\n\tconst panelContext = { menuItems, registerPanelItem };\n\n\treturn {\n\t\t...otherProps,\n\t\tpanelContext,\n\t\tresetAllItems,\n\t\ttoggleItem,\n\t\tclassName: classes,\n\t};\n}\n"]}