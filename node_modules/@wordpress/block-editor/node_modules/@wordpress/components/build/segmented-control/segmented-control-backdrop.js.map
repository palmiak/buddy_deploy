{"version":3,"sources":["@wordpress/components/src/segmented-control/segmented-control-backdrop.tsx"],"names":["SegmentedControlBackdrop","containerRef","containerWidth","state","left","setLeft","width","setWidth","canAnimate","setCanAnimate","containerNode","current","targetNode","querySelector","x","parentX","getBoundingClientRect","offsetWidth","borderWidth","offsetLeft","window","requestAnimationFrame","transform","transition","undefined"],"mappings":";;;;;;;AAGA;;AAMA;;AATA;AACA;AACA;AASA,SAASA,wBAAT,CAAmC;AAClCC,EAAAA,YADkC;AAElCC,EAAAA,cAFkC;AAGlCC,EAAAA;AAHkC,CAAnC,EAImC;AAClC,QAAM,CAAEC,IAAF,EAAQC,OAAR,IAAoB,uBAAU,CAAV,CAA1B;AACA,QAAM,CAAEC,KAAF,EAASC,QAAT,IAAsB,uBAAU,CAAV,CAA5B;AACA,QAAM,CAAEC,UAAF,EAAcC,aAAd,IAAgC,uBAAU,KAAV,CAAtC;AAEA,0BAAW,MAAM;AAChB,UAAMC,aAAa,GAAGT,YAAH,aAAGA,YAAH,uBAAGA,YAAY,CAAEU,OAApC;AACA,QAAK,CAAED,aAAP,EAAuB;AAEvB;AACF;AACA;;AACE,UAAME,UAAU,GAAGF,aAAa,CAACG,aAAd,CACjB,gBAAgBV,KAAO,IADN,CAAnB;AAGA,QAAK,CAAES,UAAP,EAAoB;AAEpB,UAAM;AAAEE,MAAAA,CAAC,EAAEC;AAAL,QAAiBL,aAAa,CAACM,qBAAd,EAAvB;AACA,UAAM;AAAEV,MAAAA,KAAK,EAAEW,WAAT;AAAsBH,MAAAA;AAAtB,QAA4BF,UAAU,CAACI,qBAAX,EAAlC;AACA,UAAME,WAAW,GAAG,CAApB;AACA,UAAMC,UAAU,GAAGL,CAAC,GAAGC,OAAJ,GAAcG,WAAjC;AAEAb,IAAAA,OAAO,CAAEc,UAAF,CAAP;AACAZ,IAAAA,QAAQ,CAAEU,WAAF,CAAR;;AAEA,QAAK,CAAET,UAAP,EAAoB;AACnBY,MAAAA,MAAM,CAACC,qBAAP,CAA8B,MAAM;AACnCZ,QAAAA,aAAa,CAAE,IAAF,CAAb;AACA,OAFD;AAGA;AACD,GAzBD,EAyBG,CAAED,UAAF,EAAcP,YAAd,EAA4BC,cAA5B,EAA4CC,KAA5C,CAzBH;AA2BA,SACC,4BAAC,oBAAD;AACC,IAAA,IAAI,EAAC,cADN;AAEC,IAAA,KAAK,EAAG;AACPmB,MAAAA,SAAS,EAAG,cAAclB,IAAM,KADzB;AAEPmB,MAAAA,UAAU,EAAEf,UAAU,GAAGgB,SAAH,GAAe,MAF9B;AAGPlB,MAAAA;AAHO;AAFT,IADD;AAUA;;eAEc,mBAAMN,wBAAN,C","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useState, useEffect, memo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport type { SegmentedControlBackdropProps } from './types';\nimport { BackdropView } from './styles';\n\nfunction SegmentedControlBackdrop( {\n\tcontainerRef,\n\tcontainerWidth,\n\tstate,\n}: SegmentedControlBackdropProps ) {\n\tconst [ left, setLeft ] = useState( 0 );\n\tconst [ width, setWidth ] = useState( 0 );\n\tconst [ canAnimate, setCanAnimate ] = useState( false );\n\n\tuseEffect( () => {\n\t\tconst containerNode = containerRef?.current;\n\t\tif ( ! containerNode ) return;\n\n\t\t/**\n\t\t * Workaround for Reakit\n\t\t */\n\t\tconst targetNode = containerNode.querySelector(\n\t\t\t`[data-value=\"${ state }\"]`\n\t\t);\n\t\tif ( ! targetNode ) return;\n\n\t\tconst { x: parentX } = containerNode.getBoundingClientRect();\n\t\tconst { width: offsetWidth, x } = targetNode.getBoundingClientRect();\n\t\tconst borderWidth = 1;\n\t\tconst offsetLeft = x - parentX - borderWidth;\n\n\t\tsetLeft( offsetLeft );\n\t\tsetWidth( offsetWidth );\n\n\t\tif ( ! canAnimate ) {\n\t\t\twindow.requestAnimationFrame( () => {\n\t\t\t\tsetCanAnimate( true );\n\t\t\t} );\n\t\t}\n\t}, [ canAnimate, containerRef, containerWidth, state ] );\n\n\treturn (\n\t\t<BackdropView\n\t\t\trole=\"presentation\"\n\t\t\tstyle={ {\n\t\t\t\ttransform: `translateX(${ left }px)`,\n\t\t\t\ttransition: canAnimate ? undefined : 'none',\n\t\t\t\twidth,\n\t\t\t} }\n\t\t/>\n\t);\n}\n\nexport default memo( SegmentedControlBackdrop );\n"]}